function JsonpService(c){var f=0,e={},a=c+".callbacks",d=function(){return};var b=function(g,j){var q=j.onSuccess||d,o=j.onTimeout||d,l=j.timeout||10*1000;var i="request_"+f,m=document.getElementsByTagName("head")[0],n=document.createElement("script");f+=1;var h=function(){m.removeChild(n);delete e[i]};var k=setTimeout(function(){o()},l);e[i]=function(r){clearTimeout(k);h();q(r)};n.type="text/javascript";n.async=true;var p=a+"."+i;g+=(g.indexOf("?")+1?"&":"?");g+="callback="+encodeURIComponent(p);n.src=g;m.appendChild(n)};return{jsonp:b,callbacks:e}}if(!window.JSON){var xhrObj=new XMLHttpRequest();xhrObj.open("GET","json3.min.js",false);xhrObj.send("");var se=document.createElement("script");se.type="text/javascript";se.text=xhrObj.responseText;document.getElementsByTagName("head")[0].appendChild(se)}!function(a,b){if(typeof module!="undefined"){module.exports=b()}else{if(typeof define=="function"&&typeof define.amd=="object"){define(b)}else{this[a]=b()}}}("kizzy",function(){function d(){}var w,D=document,e=D.domain,i=0,r=function(){return 1};try{w=!!localStorage||!!globalStorage;if(!localStorage){localStorage=globalStorage[e]}i=1}catch(t){i=0;try{if(D.documentElement.addBehavior){i=0;w=1;var C=D.documentElement;C.addBehavior("#default#userData");C.load(e);var j=C.xmlDocument,q=j.documentElement}}catch(s){w=false}}var l=d,x=d,v=d,z=d;if(w){l=i?u:o;x=i?m:h;v=i?p:A;z=i?c:k;r=function(G){try{var F=JSON.stringify(G._);if(F=="{}"){v(G.ns)}else{l(G.ns,F)}return 1}catch(E){return 0}}}function f(){return +new Date()}function a(F,E){if(F._[E]&&F._[E].e&&F._[E].e<f()){F.remove(E)}}function n(E){return typeof E==="number"&&isFinite(E)}function m(E){return localStorage[E]}function u(F,E){localStorage[F]=E;return E}function p(E){delete localStorage[E]}function c(){localStorage.clear()}function y(F){var J=q.childNodes,I,H=null;for(var G=0,E=J.length;G<E;G++){I=J.item(G);if(I.getAttribute("key")==F){H=I;break}}return H}function h(E){var G=y(E);var F=null;if(G){F=G.getAttribute("value")}return F}function o(E,G){var F=y(E);if(!F){F=j.createNode(1,"item","");F.setAttribute("key",E);F.setAttribute("value",G);q.appendChild(F)}else{F.setAttribute("value",G)}C.save(e);return G}function A(E){y(E)&&q.removeChild(node);C.save(e)}function k(){while(q.firstChild){q.removeChild(q.firstChild)}C.save(e)}function B(){this._={}}B.prototype={set:function(G,F,E){this._[G]={value:F,e:n(E)?f()+E:0};r(this)||this.remove(G);return F},get:function(E){a(this,E);return this._[E]?this._[E].value:undefined},remove:function(E){delete this._[E];r(this)},clear:function(){this._={};r(this)},clearExpireds:function(){for(var E in this._){a(this,E)}r(this)}};function g(E){this.ns=E;this._=JSON.parse(x(E)||"{}")}g.prototype=B.prototype;function b(E){return new g(E)}b.remove=v;b.clear=z;return b});function Util(){function g(j){return unescape(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+escape(j).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}function h(k,l,m,j){m=m||"/";j=j||30;window.document.cookie=k+"="+l+"; max-age="+j+"; path="+m+"; domain="+window.document.domain}function b(j){var k=g(j);return k!==undefined&&k!==null&&!String(k).match(/^\s*$/)}function f(j){j=j.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var l=new RegExp("[\\?&]"+j+"=([^&#]*)"),k=l.exec(location.search);return k===null?"":decodeURIComponent(k[1].replace(/\+/g," "))}function c(j){var k=f(j);return k!==undefined&&k!==null&&!String(k).match(/^\s*$/)}function e(){return window.navigator.userAgent}function a(j){window.top.location.href=j}function d(){window.location.href=window.location.href}function i(j){var l=[];for(var k in j){if(j[k]){l.push(encodeURIComponent(k)+"="+encodeURIComponent(j[k]))}}return l.join("&")}return{getQueryStringByName:f,hasQueryString:c,hasCookie:b,getCookie:g,setCookie:h,getUserAgent:e,refreshWindow:d,redirectTo:a,serialize:i}}function CacheService(e){var c=kizzy("me");var a=new Util();var d=function(i,h){return i+"|"+h};var b=function(j){var i=a.getCookie("GLBID");if(j===undefined){return c.get(i)}var h=c.get(d(i,j));return h?c.get(i):undefined};var f=function(j,i){var h=a.getCookie("GLBID");c.set(h,j,parseInt("10000"));if(i!==undefined){c.set(d(h,i),true,parseInt("10000"))}};var g=function(i){var h=a.getCookie("GLBID");c.set(h,undefined);if(i!==undefined){c.set(d(h,i),undefined)}};return{loggedUser:b,store:f,clean:g}}var Cadun;(function(){if(window.Cadun!==undefined&&Cadun!==null){return}window.Cadun={};Cadun.version="0.4.2";Cadun.service=new JsonpService("Cadun.service");Cadun.cache=new CacheService("Cadun.cache");Cadun.util=new Util();Cadun.user={me:undefined};function c(){Cadun.Event.cached=[];if(window._cdn!==undefined&&_cdn.length>0){Cadun.Event.cached=_cdn;Cadun.Event.trigger("ready",Cadun)}if(window.cq!==undefined&&cq.length>0){Cadun.Event.cached=cq;Cadun.Event.trigger("ready",Cadun)}var f=window.addEventListener?"addEventListener":"attachEvent";var e=window[f];var d=f==="attachEvent"?"onmessage":"message";e(d,function(g){if(Cadun.checkLoginEvent(g)){if(Cadun.callback){Cadun.closeLogin(true);Cadun.authorize(Cadun.serviceId,function(h){Cadun.user.me=h;if(h!==null&&h.token!==null){Cadun.util.setCookie("GLBID",h.token)}if(typeof(Cadun.callback)=="function"){Cadun.callback(h);Cadun.callback=null}});if(window.glb!==undefined){glb.barra.component.handleAuthArea()}if(Cadun.isRedirectEnabled){Cadun.util.redirectTo(g.data)}}}},false)}function a(){window._cdn={push:function(e){var d=Object.keys(e);for(var f=0;f<d.length;f=f+1){Cadun.Event.subscribe(d[f],e[d[f]])}}};window.cq=_cdn}function b(){if(util.hasQueryString("GLBID")&&!util.hasCookie("GLBID")){util.setCookie("GLBID",util.getQueryStringByName("GLBID"));util.refreshWindow()}}Cadun.init=function(){c();a();Cadun.authorize(undefined,function(d){})}}());Cadun.user.activities={send:function(c,a,d,e){d.user=Cadun.user.me.id;d.provider=Cadun.user.me.provider;var b="//cocoon.globo.com/user/activities/send/"+c+"_"+a+"?"+Cadun.util.serialize(d);Cadun.service.jsonp(b,{onSuccess:function(f){e()},onTimeout:function(f){e()},timeout:5000})},get:function(c,a,d,e){var b="//cocoon.globo.com/user/activities/get/"+c+"_"+a+"?limit="+d;Cadun.service.jsonp(b,{onSuccess:function(f){e(f)},onTimeout:function(f){e({})},timeout:5000})}};Cadun.authorize=function(c,d){var a=Cadun.getLoggedUser(c);if(a!==undefined){d(a);return}var b="//cocoon.globo.com/user/logged"+(c===undefined?"":"?servico_id="+c);Cadun.service.jsonp(b,{onSuccess:function(e){if(e&&e.status&&e.provider&&e.token){Cadun.setLoggedUser(e,c)}else{e=Cadun.unauthorize()}d(e)},onTimeout:function(e){e=Cadun.unauthorize();d(e)},timeout:5000})};Cadun.getLoggedUser=function(b){var a=Cadun.cache.loggedUser(b);if(a!==undefined&&Cadun.user.me===undefined){Cadun.setLoggedUser(a,b)}return a};Cadun.setLoggedUser=function(a,b){Cadun.user.me=a;Cadun.cache.store(a,b);Cadun.Event.trigger("userInfoAvailable",a)};Cadun.unauthorize=function(){var a={status:"unauthorized"};Cadun.Event.trigger("userUnauthorized",a);return a};Cadun.Event={subscribe:function(b,c){if(b==="ready"){c(Cadun);return}else{if(b==="userInfoAvailable"&&Cadun.user.me){c(Cadun.user.me)}}var a={};a[b]=c;Cadun.Event.cached.push(a)},trigger:function(){var a=Array.prototype.shift.call(arguments);var c=Cadun.Event.cached||[];for(var b=0;b<c.length;b=b+1){var d=c[b][a];if(d){d.apply(null,arguments)}}}};Cadun.user.feed=function(a){};Cadun.isRedirectEnabled=false;Cadun.closeButtonDisabled=false;Cadun.callback=null;Cadun.closeModalCallback=null;Cadun.serviceId=null;Cadun.login=function(d,c,f,e,b){Cadun.serviceId=d;Cadun.closeModalCallback=b;if(GloboIDSDK.isActive()){GloboIDSDK.bindLogin(d).onSuccess(function(g){e(g);if(f){Cadun.util.redirectTo(c)}});return}var a=function(m,l){var h=document.body,i=document.documentElement;var g=Math.max(h.scrollHeight,h.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight);var k=(document.documentElement.scrollTop||document.body.scrollTop);var j=(k<60?k+80:k+40);m.style.height=g+"px"};Cadun.authorize(d,function(h){if(h.status!=="authorized"){var k="https://login.globo.com/login/"+d+"?url="+c+"&tam=WIDGET";if(Cadun.needsToOpenInNewWindow()){Cadun.util.redirectTo(k);return}Cadun.cache.clean(d);Cadun.loginLoadCSS();var j=document.createElement("div");j.className="cadun-modal";var i=document.createElement("div");i.className="login-wrapper-modal";i.setAttribute("onclick","Cadun.closeLogin();");j.appendChild(i);var m=document.createElement("div");m.className="login-modal";var l=document.createElement("div");if(!Cadun.closeButtonDisabled){l.className="close-modal";l.setAttribute("onclick","Cadun.closeLogin();");m.appendChild(l)}var g=document.createElement("iframe");g.style.height="100%";g.style.width="100%";g.src=k;m.appendChild(g);j.setAttribute("id","cadunLoginModal");j.appendChild(m);document.body.appendChild(j);document.body.style.overflow="hidden";if(f){Cadun.isRedirectEnabled=true}if(e){Cadun.callback=e}a(i,m,l);j.focus()}})};Cadun.closeLogin=function(a){if(!a&&Cadun.closeModalCallback){Cadun.closeModalCallback()}document.body.style.overflow="auto";var b=document.getElementById("cadunLoginModal");if(b){b.parentNode.removeChild(b)}};Cadun.loginLoadCSS=function(){var a=document.getElementsByTagName("head")[0];var b=document.createElement("link");b.rel="stylesheet";b.type="text/css";b.href="//s.glbimg.com/pc/ca/login.css";b.media="all";a.appendChild(b)};Cadun.needsToOpenInNewWindow=function(){return Cadun.util.getUserAgent().toLowerCase().indexOf("msie 8")!==-1||Cadun.util.getUserAgent().toLowerCase().indexOf("msie 9")!==-1};Cadun.checkLoginEvent=function(c){var d=["provisionamento","confirmar-email","recuperacaoSenha"],b=(c.origin.indexOf("login.globo.com")!==-1);if(b){for(var a in d){if(c.data.indexOf(d[a])!==-1){return false}}}else{return false}return true};Cadun.logout=function(c){if(GloboIDSDK.isActive()){GloboIDSDK.bindLogout().onSuccess(function(){c()});return}var a="//login.globo.com/logout";var b=document.createElement("IFRAME");b.setAttribute("id","cadun-logout");b.setAttribute("src",a);b.style.width=0;b.style.height=0;document.getElementsByTagName("html")[0].appendChild(b);document.getElementById("cadun-logout").onload=function(){Cadun.cache.clean();if(typeof c=="function"){c.apply()}document.getElementsByTagName("html")[0].removeChild(this)}};Cadun.user.setPreference=function(a,b){prefsService=function(c){var d="//cocoon.globo.com/preferences/"+a.context+"/"+a.key+"?value="+a.value;Cadun.service.jsonp(d,{onSuccess:function(e){b(e)},onTimeout:function(e){b({})},timeout:5000})};if(Cadun.user.me){prefsService(Cadun.user.me)}else{Cadun.authorize(464,prefsService)}};Cadun.user.getPreference=function(a,b){prefsService=function(c){var d="//cocoon.globo.com/preferences/"+a.context;if(a.key){d=d+"/"+a.key}Cadun.service.jsonp(d,{onSuccess:function(e){b(e)},onTimeout:function(e){b({})},timeout:5000})};if(Cadun.user.me){prefsService(Cadun.user.me)}else{Cadun.authorize(464,prefsService)}};Cadun.user.recommendations=function(b,a,c){recommendationService=function(d){params={client_id:b,user_id:d.id,user_token:d.token,user_provider:d.provider,url:window.location.origin+window.location.pathname,limit:a};var e="//cocoon.globo.com/user/recommendations/?"+Cadun.util.serialize(params);Cadun.service.jsonp(e,{onSuccess:function(f){c(f)},onTimeout:function(f){c({})},timeout:5000})};if(Cadun.user.me){recommendationService(Cadun.user.me)}else{Cadun.authorize(5458,recommendationService)}};var GloboIDSDK;(function(){if(window.GloboIDSDK!==undefined){return}var a=function(){};var c=function(){};function e(j){if(window.console!==undefined&&window.console.log!==undefined){console.log(j)}}function i(){var j=Cadun.util.hasCookie("GLOBOIDSDK");e("SDK IS PRESENT:"+j);return j}function f(j){e("SDK bindLogin: S-"+j);GloboIDSDK.loadURL("globoidsdk://login/"+j);return GloboIDSDK}function d(){e("SDK bindLogout");GloboIDSDK.loadURL("globoidsdk://logout");return GloboIDSDK}function b(j){GloboIDSDK.failureCallback=j||a;return GloboIDSDK}function g(j){GloboIDSDK.successCallback=j||c;return GloboIDSDK}function h(j){setTimeout(function(){window.location=j})}GloboIDSDK={isActive:i,bindLogin:f,bindLogout:d,onSuccess:g,onFailure:b,successCallback:c,failureCallback:a,loadURL:h}})();(function(){if(window.Cadun!==null){Cadun.init()}})();